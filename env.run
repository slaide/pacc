cd docker
sudo docker build -t pacc-build-env -f env.docker .
cd ..
echo "building done"
# if directory musl does not yet exist, create it
if [ ! -d musl ]; then
    wget https://musl.libc.org/releases/musl-1.2.5.tar.gz
    tar -xzf musl-1.2.5.tar.gz
    cd musl-1.2.5
    echo $(pwd)
    CC=clang-16 ./configure --prefix=$(pwd)/../musl && make -j && make -j install
    rm -rf musl-1.2.5.tar.gz musl-1.2.5
fi

sudo docker run --rm -v "$(pwd)":/pacc -i -t pacc-build-env
